server {
    listen               80;
    gzip                 on;
    client_max_body_size 0;

    location /api/v1/ {
        proxy_redirect        off;
        proxy_set_header      Host $host;
        proxy_set_header      X-Real-IP $remote_addr;
        proxy_set_header      X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header      X-Forwarded-Proto $scheme;
        proxy_read_timeout    1m;
        proxy_connect_timeout 1m;
        proxy_pass            http://auth:8080/;
    }
    location /api/v2/ {
        proxy_redirect        off;
        proxy_set_header      Host $host;
        proxy_set_header      X-Real-IP $remote_addr;
        proxy_set_header      X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header      X-Forwarded-Proto $scheme;
        proxy_read_timeout    1m;
        proxy_connect_timeout 1m;
        proxy_pass            http://server:8181/;
    }
}

# events {
#     worker_connections  1024;
# }

# http {
#         server_names_hash_bucket_size 64;

#         server {
#                 server_name pepper-coding.ru;
#                 listen      443 ssl;

#                 ssl_certificate pepper-coding.ru.pem;
#                 ssl_certificate_key pepper-coding.ru.key;
#                 ssl_protocols TLSv1.3;
#                 ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256;
#                 ssl_prefer_server_ciphers on;

#                 location / {
#                         proxy_pass         http://127.0.0.1:80/;
#                 }
#         }
# }

# -----BEGIN PRIVATE KEY-----
# MIIEuwIBADANBgkqhkiG9w0BAQEFAASCBKUwggShAgEAAoIBAQDVI3F71uWV9ttu
# d9PQ7Wc++xUXifa8zsJ3sR8iKATG+xduJg1a9myF+qxSlAvsrAyElFDpt0ztC0LG
# D+bMeB69bhHabOYsQMpzDvmKRBgSIZNxr16YMXkqbhxMk/Mtxy4jwYVhxeucbGuv
# +52gUYNLwo5zdSkhEMZ8tjL/tD7JHySDSGrp3zZwPYUFbsKEy92DPjH3kR6VCHbf
# 2a7meX/VaRNhDmVMbo/6nn3afMRbGwWdzklmXXV9U/d5ixIICam/uFlru5hww5UN
# n46ZNw0a+84b0hHPt+Y6uhjdxUu7PVavReH+orW0CfDD/ydbpoxpqEqGUeztMEop
# lyRGdZmNAgMBAAECgf8MEnXbDdDzLYhAOYlFzCyM5KvNKYNQLmXVYbLhvGKI4q/x
# DTa0cEC1Vf1sr/X88cHDwKLUmg1BX+HoVf48lpEnKZTZSlG/L+xHmBGKQ1EZtc0k
# I0q4VBUI0jPIIpkjfqSeYdesMgmmUn3G+flzmypUoDBxWbF6rfiQF8HLuenUelSc
# 2r2hR0UUx8TlkRmiRgUsKW7HVvHen7KHkVyLKNUz3V2O+ohWn7ihTbG610pcyKIi
# M5IMdU/DrRXUyiLaMT2Nvzx+N3E2DL7TffsaLW93WAB3Dqi0SBMMAu497fLfn4ch
# IKmjefNz5DjuWKSmqQ5rSmswScxSkkwXbwr4UdECgYEA8fQDqhvb66omz0bV8wSo
# D8HmQaS+l4tW0TyEGOywYIjzIVYgnRnBRocXw8VNaUhEriF+Wj/QtSnENOAFYAa1
# ketvSGQvxavfxo0vbtf69uDjuPmDU6BbN9qRDTfXdNTjuT0GtnTokuaukNZBxdHY
# RVVuHwaVVewbVa0h1MlgiMkCgYEA4YMs24/hwAL+3sF+YgbIzrVNQNJteoQRkUZg
# Vjc1PDdRbvwGqB5CTctdsKqhwWnNlr0FtcTwUncW1CAlKxYDAdSBvVfTlkCd9ACo
# fzEymBqut2finxXt1LbrphJUZ5511sfHQVJOn6QAAfVa96fByhbtlcuH26sbqvzL
# NrR58KUCgYApsD2hZcNyy5J8TFw4zyiV7nbaAKTGP7/ptV+dW8rYF0CtEcX0y6c9
# m7FAjhJUfZs31ZWLv0saq+OeqKrEbOOEDOjTtE9247Je55ywoI4hU4ZpLLSwCAUv
# jn1HpcN94eCK3jT14xbfmNejJQeYKhv1dk7PEbdRYqkjDf2ySDBV4QKBgASu5bKV
# lVmYdlSH7ij4/RiV2UncVNuzfG3o6T1BHkDm4TEN2NGK91OIQqTVllBe8x8LQ+AX
# e+oqgPXcyQjRBzT1hdA5z7ISG3Wiwd0KV4OjIje615D4Mp01Q0WKoegY+VeBhJjN
# rcZQ8JMZ1k7IVBTvTvXKaULdldCCOXIkY1flAoGBALJ8mRoTlLx5CiFzwF3xIP1+
# ioI8tKdyLzForuQo6vFzf7VcfTwpivrZqWP+9Auw4iap420TXoksvKoLjvO+VeYb
# D8HmQaS+l4tW0TyEGOywYIjzIVYgnRnBRocXw8VNaUhEriF+Wj/QtSnENOAFYAa1
# ketvSGQvxavfxo0vbtf69uDjuPmDU6BbN9qRDTfXdNTjuT0GtnTokuaukNZBxdHY
# RVVuHwaVVewbVa0h1MlgiMkCgYEA4YMs24/hwAL+3sF+YgbIzrVNQNJteoQRkUZg
# Vjc1PDdRbvwGqB5CTctdsKqhwWnNlr0FtcTwUncW1CAlKxYDAdSBvVfTlkCd9ACo
# fzEymBqut2finxXt1LbrphJUZ5511sfHQVJOn6QAAfVa96fByhbtlcuH26sbqvzL
# NrR58KUCgYApsD2hZcNyy5J8TFw4zyiV7nbaAKTGP7/ptV+dW8rYF0CtEcX0y6c9
# m7FAjhJUfZs31ZWLv0saq+OeqKrEbOOEDOjTtE9247Je55ywoI4hU4ZpLLSwCAUv
# jn1HpcN94eCK3jT14xbfmNejJQeYKhv1dk7PEbdRYqkjDf2ySDBV4QKBgASu5bKV
# lVmYdlSH7ij4/RiV2UncVNuzfG3o6T1BHkDm4TEN2NGK91OIQqTVllBe8x8LQ+AX
# e+oqgPXcyQjRBzT1hdA5z7ISG3Wiwd0KV4OjIje615D4Mp01Q0WKoegY+VeBhJjN
# rcZQ8JMZ1k7IVBTvTvXKaULdldCCOXIkY1flAoGBALJ8mRoTlLx5CiFzwF3xIP1+
# ioI8tKdyLzForuQo6vFzf7VcfTwpivrZqWP+9Auw4iap420TXoksvKoLjvO+VeYb
# Y2o6MxPUv8ydjFNXvT0AXQb8qv/dVwbWu8hV9eTrYANiJyzMo46MCCukQBnOlE2q
# V7/R3iUPlI/+yamGy/wI
# -----END PRIVATE KEY-----